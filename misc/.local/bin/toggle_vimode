#!/usr/bin/env zsh

# fpath+=($HOME/.zsh/functions)
# autoload -Uz x::get-active-window-process-name

# local _process
# _process="$(x::get-active-window-process-name)"
# [[ "${_process}" == "/usr/bin/termin" ]] && return 1

LOCK=/tmp/vimode.lock
if [[ -f $LOCK ]]; then
  rm $LOCK
  killall xbindkeys 2>&1 > /dev/null
  ln -sf ~/.xbindkeysrc.normal ~/.xbindkeysrc.scm
  notify-send 'vimmode' 'off'
else
  touch $LOCK
  notify-send 'vimmode' 'on'
  ln -sf ~/.xbindkeysrc.vim ~/.xbindkeysrc.scm
fi
xbindkeys
return 0
