# vim: filetype=zsh sw=2 ts=2 sts=2 et tw=80 foldlevel=0 nospell

: <<=cut
=item Function C<tmux::attach>

Tmux attach wrapper, which updates tmux environment as configured.

@return NULL
=cut

setopt localoptions err_return

if [[ ! ($# -eq 2 && "$1" == "-t") ]]; then
  io::err "tmux::attach -t [session]"
fi

for var in ${__TMUX_VARS__};
do
  local _value=
  eval _value=\$${var}
  \tmux set-environment ${var} "${_value}"
done
tmux attach -dt "$2"
